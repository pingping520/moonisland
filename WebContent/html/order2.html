<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>填写订单页</title>
    <link rel="stylesheet" type="text/css" href="../css/bootstrap.min.css" />
    <link rel="stylesheet" type="text/css" href="../icon/iconfont.css">
    <link rel="stylesheet" type="text/css" href="../css/order.css" />
</head>
<body>
<div id="wrap">
    <!--头部开始-->
    <div id="header" class="navbar-fixed-top">
        <div class="row">
            <div class="col-xs-2 text-right"><i class="iconfont icon-toLeft-copy"></i></div>
            <div class="col-xs-2 col-xs-push-8"></div>
            <div class="col-xs-8 text-center col-xs-pull-2">填写订单</div>
        </div>
    </div>
    <!--end-->

    <!--买家地址部分-->
    <div class="address container-fluid">
    	<div id="fill-address"></div>
        <button id="checkaddress" onclick="fun01()">选择地址</button>
    </div>
    <!--end-->
    <!--商品区域-->
    <div id ="main" class="container-fluid">
        <div class="liner row"></div>
        <div class="bar"></div>
        <div class="row product">
            <div class="col-xs-4 image">
                <img src="../images/gls.png" class="img-responsive center-block" alt="帕森(PARZIN)">
            </div>
            <div class="col-xs-8 text-left">
                <p>帕森(PARZIN) 男士太阳镜铝镁偏光太...</p>
                <p><small class="text-muted">颜色:黑框黑灰片</small></p>
                <p id="money">￥<span style="font-size:14px;">139</span>.00&nbsp;<span style="color:#58585a;" class="iconfont icon-jinggao"></span></p>
            </div>
        </div>
        <div id="middle" class="container-fluid">
            <div class="row"></div>
        </div>
    </div>
    <!--end-->

    <!--底部-->
    <div id="footer" class="footer navbar-fixed-bottom">
        <div class="container-fluid money1">
            <div class="row">
                <div class="col-xs-6 text-left">
                    <p>商品金额</p>
                </div>
                <div class="col-xs-6 text-right">
                    <p class="money">￥139.00</p>
                </div>
            </div>
            <div class="row">
                <div class="col-xs-6 text-left">
                    <p>运费</p>
                </div>
                <div class="col-xs-6 text-right">
                    <p class="money">+ ￥0.00</p>
                </div>
            </div>
        </div>
        <div class="container-fluid money2">
            <div class="row">
                <div class="col-xs-7 text-right money"><div>实付款:￥139.<small>00</small></div></div>
                <div class="col-xs-5"><div class="sub"><a href="#">提交订单</a></div></div>
            </div>
        </div>
    </div>
    <!-- end-->
</div>

<!-- 选择地址  -->
<div class="" id="area" style="display:none;background:#ddd;">
	<div id="header" class="navbar-fixed-top">
        <div class="row">
            <div class="col-xs-2 text-right"><i class="iconfont icon-toLeft-copy" id="rutn"></i></div>
            <div class="col-xs-2 col-xs-push-8"></div>
            <div class="col-xs-8 text-center col-xs-pull-2">填写地址</div>
        </div>
    </div>
    <div style="height:62px;"></div>
		<div class="container-fluid" style="background:#ddd;">
			<div id="pcd" class="col-xs-12">
				<ul class="province" style="list-style: none; padding-left: 0;"></ul>
			</div>
			<div id="pcd-address" class="col-xs-12">
				
			</div>
			<div id="detailed-address" class="col-xs-12" style="display:none">
				<input id="detailed-address-input" type="text" value="请输入详细地址"/>
			</div>
			<div id="name-address" class="col-xs-12" style="display:none">
				<input id="name-address-input" type="text" value="请输入收货人姓名"/>
			</div>
			<div id="tell-address" class="col-xs-12" style="display:none">
				<input id="tell-address-input" type="text" value="请输入收货人电话"/>
			</div>
			<div id="zip-code" class="col-xs-12" style="display:none">
				<input id="zip-code-input" type="text" value="请输入邮政编码"/>
			</div>
		</div>
	<div style="height:50px;"></div>
	<div id="footer2" class="footer navbar-fixed-bottom">
        <div class="container-fluid money2">
            <div class="row">
                <div class="col-xs-12" style="padding:0px;"><div id="addbtn" class="sub" style="color:white;text-align:center;">确定</div></div>
            </div>
        </div>
    </div>
</div>
<script type="text/javascript" src="../js/jquery-1.11.0.min.js"></script>
<script type="text/javascript" src="../js/bootstrap.min.js"></script>
<script type="text/javascript">

function fun01(){
	$.get("../area/findall/0",function(data){
		var ls = "";
		for(var i=0;i<data.length;i++){
			var title = data[i].title;
			var areaId = data[i].areaId;
			ls += "<li value="+areaId+" onclick='province(this)' style='border-bottom:1px solid white'>"+title+"</li>";
		}
		$('.province').find("li").remove();
		$('.province').append(ls);
	})
}
	
	function province(obj){
		var province = $(obj).text();
		var id = $(obj).val();
		var ctid = $('#ct').val();
		if(id!=ctid){
			$.get("../area/findall/"+id,function(data){
				var ls = "";
				ls += "<li id='pro' value="+id+" onclick='fun01()' style='background:#ccc'>"+province+"</li>";
				for(var i=0;i<data.length;i++){
					var title = data[i].title;
					var areaId = data[i].areaId;
					ls += "<li value="+areaId+" onclick='city(this)'>"+title+"</li>";
				}
			
				$('.province').find("li").remove();
				$('.province').append(ls);
			})
		}else{
			var pro2id = $('#pro2').val();
			var pro2 = $('#pro2').text();
			$.get("../area/findall/"+pro2id,function(data){
				var ls = "";
				ls += "<li id='pro' value="+pro2id+" onclick='fun01()' style='background:#ccc'>"+pro2+"</li>";
				for(var i=0;i<data.length;i++){
					var title = data[i].title;
					var areaId = data[i].areaId;
					ls += "<li value="+areaId+" onclick='city(this)'>"+title+"</li>";
				}
			
				$('.province').find("li").remove();
				$('.province').append(ls);
			})
		}
		
	}
	function city(obj){
		var pro = $('#pro').text();
		var proid = $('#pro').val();
		var city = $(obj).text();
		var cityid = $(obj).val();
		var id = $(obj).val(); 
		$.get("../area/findall/"+cityid,function(data){
			var ls = "";
			ls += "<li id='pro2' value="+proid+" onclick='fun01()' style='background:#ccc'>"+pro+"</li>";
			ls += "<li id='ct' value="+cityid+" onclick='province(this)' style='background:#ccc'>"+city+"</li>";
			for(var i=0;i<data.length;i++){
				var title = data[i].title;
				var areaId = data[i].areaId;
				ls += "<li value="+areaId+" onclick='address(this)'>"+title+"</li>";
			}
			$('.province').find("li").remove();
			$('.province').append(ls);
		})
	}
	
	function address(obj){
		var p = $('#pro2').text();
		var c = $('#ct').text();
		var d = $(obj).text();
		var pcd = "<p>"+p+c+d+"</p>";
		$('#pcd').css('display','none');
		$('#pcd-address').find("p").remove();
		$('#pcd-address').append(pcd);
		$('#pcd-address').css('display','block');
		$('#detailed-address').css('display','block');
		$('#name-address').css('display','block');
		$('#tell-address').css('display','block');
		$('#zip-code').css('display','block');
	}
	
	$('#checkaddress').click(function(){
		$('#wrap').css('display','none');
		$('#area').css('display','block');
		$('#pcd').css('display','block');
		$('#pcd-address').css('display','none');
		$('#detailed-address').css('display','none');
		$('#name-address').css('display','none');
		$('#tell-address').css('display','none');
		$('#zip-code').css('display','none');
	});
	$('#rutn').click(function(){
		$('#area').css('display','none');
		$('#wrap').css('display','block');
	})
	$('#pcd-address').click(function(){
		alert('等会再改')
	})
	$('#addbtn').click(function(){
		var pcdAddress = $('#pcd-address').text();
		var detailed = $('#detailed-address-input').val();
		var name = $('#name-address-input').val();
		var tell = $('#tell-address-input').val();
		var zip = $('#zip-code-input').val();
		
		var add = "<p>"+pcdAddress+" "+detailed+" "+name+tell+" "+zip+"</p>";
		$('#fill-address').find("p").remove();
		$('#fill-address').append(add);
		$('#area').css('display','none');
		$('#wrap').css('display','block');
	})
	
</script>
</body>
</html>